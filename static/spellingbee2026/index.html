<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spelling Bee 2026 - Master Quizzer</title>
    <style>
        :root { --primary: #6366f1; --bg: #f8fafc; --text: #1e293b; --success: #22c55e; --warning: #eab308; --danger: #ef4444; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); display: flex; justify-content: center; padding: 20px; }
        .card { background: white; width: 100%; max-width: 500px; padding: 2rem; border-radius: 1.5rem; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        
        /* Stats Dashboard */
        .stats-bar { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; text-align: center; }
        .stat-item { padding: 10px; border-radius: 0.75rem; background: #f1f5f9; }
        .stat-val { display: block; font-size: 1.2rem; font-weight: 800; }
        .stat-label { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.05em; color: #64748b; }
        .s1 { color: var(--success); } .s2 { color: var(--warning); } .s3 { color: var(--danger); }

        .word-display { font-size: 2.5rem; font-weight: 800; text-align: center; margin: 1.5rem 0; color: var(--primary); line-height: 1.1; min-height: 100px; display: flex; align-items: center; justify-content: center; border: 2px solid #f1f5f9; border-radius: 1rem; padding: 10px; }
        .status-row { display: flex; justify-content: space-between; font-size: 0.85rem; color: #64748b; margin-bottom: 1rem; border-bottom: 1px solid #e2e8f0; padding-bottom: 10px;}
        
        #definitionBox { display: none; padding: 15px; background: #eff6ff; border-left: 4px solid var(--primary); border-radius: 8px; margin: 15px 0; font-size: 0.95rem; line-height: 1.5; color: #1e40af; }
        
        button { width: 100%; padding: 12px; border-radius: 0.75rem; border: none; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .btn-speak { background: #0f172a; color: white; margin-top: 20px; padding: 16px; }
        .btn-def { background: #e0e7ff; color: #4338ca; border: 1px solid #c7d2fe; margin-top: 10px; }
        
        /* Rating Buttons */
        .rating-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 15px; }
        .rating-grid button { height: 75px; display: flex; flex-direction: column; align-items: center; justify-content: center; line-height: 1.2; }
        .btn-num { font-size: 1.3rem; font-weight: 800; }
        .btn-label { font-size: 0.7rem; font-weight: normal; margin-top: 4px; opacity: 0.9; }
        
        .r1 { background: #dcfce7; color: #166534; }
        .r2 { background: #fef9c3; color: #854d0e; }
        .r3 { background: #fee2e2; color: #991b1b; }
        
        select { width: 100%; padding: 12px; border-radius: 0.75rem; border: 1px solid #cbd5e1; background: white; font-size: 1rem; margin-top: 5px; }
        .controls { background: #f8fafc; padding: 15px; border-radius: 1rem; border: 1px solid #e2e8f0; margin-bottom: 20px; }
    </style>
</head>
<body>

<div class="card">
    <div class="stats-bar">
        <div class="stat-item">
            <span class="stat-val s1" id="statMastered">0</span>
            <span class="stat-label">Got Right</span>
        </div>
        <div class="stat-item">
            <span class="stat-val s2" id="statLearning">0</span>
            <span class="stat-label">Needs Work</span>
        </div>
        <div class="stat-item">
            <span class="stat-val s3" id="statReview">0</span>
            <span class="stat-label">Extra Work</span>
        </div>
    </div>

    <div class="controls">
        <label style="font-size: 0.75rem; font-weight: bold; color: #475569;">PRACTICE FILTER:</label>
        <select id="ratingFilter" onchange="applyFilter()">
            <option value="all">All Words</option>
            <option value="0">Unrated (New)</option>
            <option value="1">Rating 1 (Got Right)</option>
            <option value="2">Rating 2 (Needs Work)</option>
            <option value="3">Rating 3 (Extra Work)</option>
        </select>
        <button onclick="shuffleQueue()" style="background:none; color:#64748b; font-size: 0.75rem; margin-top: 8px; text-decoration: underline;">üîÄ Shuffle Current View</button>
    </div>

    <div id="quizArea">
        <div class="status-row">
            <span id="progress">Word 0 of 0</span>
            <span id="curRatingDisplay">Current: --</span>
        </div>
        
        <div class="word-display" id="currentWord">---</div>
        
        <button class="btn-def" id="defBtn" onclick="getOnlineDefinition()">üåê Fetch Definition</button>
        <div id="definitionBox"></div>

        <button class="btn-speak" onclick="speakWord()">üîä Pronounce Word</button>
        
        <div class="rating-grid">
            <button class="r1" onclick="rate(1)">
                <span class="btn-num">1</span>
                <span class="btn-label">Got Right</span>
            </button>
            <button class="r2" onclick="rate(2)">
                <span class="btn-num">2</span>
                <span class="btn-label">Needs Work</span>
            </button>
            <button class="r3" onclick="rate(3)">
                <span class="btn-num">3</span>
                <span class="btn-label">Extra Work</span>
            </button>
        </div>
        <button onclick="nextWord()" style="background:none; color:var(--primary); font-size:0.9rem; margin-top: 15px;">Skip Word ‚Üí</button>
    </div>
</div>

<script>
    const rawWords = ["tag","send","deck","stuck","snug","fish","hold","mind","stay","scrub","draw","brown","cozy OR cosy","tint","milk","yawn","tank","want","crowd","pond","skirt","sharks","quilt","twigs","taffy","comfy","stretch","tight","candy","scrunch","ruby","close","tackle","wire","skater","giant","bucket","chance","baskets","tender","paste","melon","farmer","parent","tail","hockey","slime","insects","teeth","shortcut","bait","lure","cluster","forest","hollow","spinning","baffling","sizzling","hoist","search","remind","mango","coral","jangle","shimmer","blossoms","swampy","studded","focus","distress","lessons","moment","ajar","basil","triple","satin","ahoy","signal","answer","shuffle","dollop","minnows","silver","before","circus","writing","kitchen","sugar","awkward","seep","sweet","wheels","faint","fruit","roam","goats","woozy","limbs","ahead","se√±or","unicorn","faraway","heater","pirates","understand","wooden","leaning","breakfast","window","acrobat","message","chocolate","forepaw","elephant","hedgehog","recipe","garbage","surprise","mermaid","bombarded","disability","incredible","leather","countess","nervous","peppercorn","cartwheel","raise","weather","zooming","attacked","turnout","eaten","streetlights","journey","courtyard","shouting","asleep","curious","dinosaur","brilliant","vacuum","gorgeous","monsoon","dangerous","avocado","valentine","February","formation","especially","hesitate","scorcher","scavenger","fragments","deflated","unleash","ration","cosmetics","crawdad","frustration","unruly","mascot","aroma","moustache OR mustache","artifacts OR artefacts","perfume","sinister","tuxedo","discoveries","lurches","language","prognosis","Buffalo","sequins","gallop","fabulous","lanky","fluently","mysterious","brandished","sardines","anguish","conical","rickety","lilt","pediatric","porridge","democracy","rummage","beige","ancestral","grimace","gaunt","enormous","geranium","nautical","dubious","ebony","foreign","paltry","verdict","garbled","encourages","imitation","miniature","receptionist","preamble","plausible","reprimanding","commotion","oblivion","immigrants","steeple","spectators","lanyards","suspicious","parchment","ramshackle","fugitive","heron","dissolving","nomad","billowed","skewer","Berlin","lunacy","conjure","bracken","noggin","neon","rakish","hypnosis","rotunda","gusto","toiletries","gleaned","jeered","winsome","prattling","galore","emporium","atrium","eccentric","savant","almanac","hippies","samosas","campaign","pistachio","mosque","zombielike","warlock","colossus","convulsively","dimensional","garishly","graffitist","Everest","dexterity","cavorting","marauder","conscience","battlements","deferential","albatross","khaki","opalescent","asphalt","Yiddish","talcum","tranquilizer","equestrian","plaited","monsieur","manticores","prestigious","fraidycat","guttural","lo mein","courier","sans serif","psyche","stucco","Frankenstein","schema","et cetera","vidimus","delphine","slough","archipelago","serape OR sarape","puissance","pinioning","chignon","pheromone","galleon","magnanimous","chartreuse","wainscoting","Nehru","gangly","swaggering","chimneys","riveted","plaid","dirge","zeal","whittled","depots","fiberglass","salvaged","fissures","enthusiastic","discipline","unfamiliar","scurrying","dignitaries","pizzeria","dismissal","skittish","careened","nomination","opportunist","dictatorship","comrades","sporadic","promenade","repugnant","invincible","renowned","parachute","laborious","appointment","foreseeable","ratify","scalpel","reclusive","compassionate","bulletin","alfalfa","officially","crematorium","bayonet","amicable","exuberant","beautician","equations","assignment","ultimatum","whinnying","squalor","memoirs","cylinders","ominous","muffler","syndrome","premises","safari","lasagna","substantially","mercantile","formidable","propaganda","marquee","proficient","compunction","emphatically","hyperventilated","ostracism","onslaught","ruefully","misanthrope","prototype","cravenly","mulberry","hypocritical","chlorine","traumatic","receipts","solemnly","begrudge","contentious","precocious","ensemble","cadre","lye","belfry","lacrosse","sluice","cajolery","vigilance","residuals","boutique","peroxide","aristocracy","apocalypse","tuberculosis","barricade","confreres","anonymously","unparalleled","barrette","chassis","junket","quandary","Erie","gingham","silhouette","auxiliary","thesaurus","patriarchs","chandelier","dulce","concierge","latticework","hibiscus","tamale","maracas","gyroplane","burpees","Adriatic","piccolo","au revoir","tulle","boll weevil","camphor","Tucson","paparazzi","pumpernickel","pogrom","bursitis","p√¢tisserie","cycads","sarsaparilla","ma√Ætre d'","cannelloni","boulangerie","bronchitis","Oswego","diphtheria","baklava","corbels","trebuchets","Kilimanjaro","fr√§ulein","prot√©g√©","hors d'oeuvres","maquisards","Aubusson","Charolais OR Charollais"];

    const masterWords = [...new Set(rawWords)].filter(w => w.trim().length > 0);
    const STORAGE_KEY = 'bee_v2026_';
    let activeQueue = [];
    let currentIndex = 0;

    window.onload = () => {
        updateStats();
        applyFilter();
    };

    function updateStats() {
        let counts = { 1: 0, 2: 0, 3: 0 };
        masterWords.forEach(word => {
            const r = localStorage.getItem(STORAGE_KEY + word);
            if (r && counts[r] !== undefined) counts[r]++;
        });
        document.getElementById('statMastered').innerText = counts[1];
        document.getElementById('statLearning').innerText = counts[2];
        document.getElementById('statReview').innerText = counts[3];
    }

    function applyFilter() {
        const val = document.getElementById('ratingFilter').value;
        activeQueue = (val === 'all') 
            ? [...masterWords] 
            : masterWords.filter(w => (localStorage.getItem(STORAGE_KEY + w) || '0') === val);
        
        currentIndex = 0;
        showWord();
    }

    function showWord() {
        const display = document.getElementById('currentWord');
        const defBox = document.getElementById('definitionBox');
        const defBtn = document.getElementById('defBtn');

        if (activeQueue.length === 0) {
            display.innerText = "No Words Found";
            document.getElementById('progress').innerText = "0 of 0";
            document.getElementById('curRatingDisplay').innerText = "Rating: --";
            defBox.style.display = 'none';
            return;
        }

        const word = activeQueue[currentIndex];
        display.innerText = word;
        defBox.style.display = 'none';
        defBtn.innerText = "üåê Fetch Definition";
        
        const rating = localStorage.getItem(STORAGE_KEY + word) || '0';
        document.getElementById('curRatingDisplay').innerText = "Rating: " + (rating === '0' ? "None" : rating);
        document.getElementById('progress').innerText = `Word ${currentIndex + 1} of ${activeQueue.length}`;
    }

    async function getOnlineDefinition() {
        const defBox = document.getElementById('definitionBox');
        const btn = document.getElementById('defBtn');
        let searchTerm = activeQueue[currentIndex].split(/ OR /i)[0].trim();
        
        btn.innerText = "üîç Searching...";
        defBox.style.display = 'block';
        defBox.innerText = "Querying dictionary...";

        try {
            const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${searchTerm}`);
            if (!response.ok) throw new Error();
            const data = await response.json();
            const meaning = data[0].meanings[0].definitions[0].definition;
            const pos = data[0].meanings[0].partOfSpeech;
            defBox.innerHTML = `<strong>(${pos})</strong>: ${meaning}`;
            btn.innerText = "‚úÖ Found";
        } catch {
            defBox.innerText = "Definition not found in free database.";
            btn.innerText = "‚ùå Not Found";
        }
    }

    function speakWord() {
        if (activeQueue.length === 0) return;
        const text = activeQueue[currentIndex].replace(/ OR /gi, ", or, ");
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.85;
        window.speechSynthesis.speak(utterance);
    }

    function rate(score) {
        const word = activeQueue[currentIndex];
        localStorage.setItem(STORAGE_KEY + word, score);
        updateStats();
        
        if (document.getElementById('ratingFilter').value !== 'all') {
            activeQueue.splice(currentIndex, 1);
            if (currentIndex >= activeQueue.length) currentIndex = 0;
        } else {
            currentIndex = (currentIndex + 1) % activeQueue.length;
        }
        showWord();
    }

    function nextWord() {
        if (activeQueue.length > 0) {
            currentIndex = (currentIndex + 1) % activeQueue.length;
            showWord();
        }
    }

    function shuffleQueue() {
        for (let i = activeQueue.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [activeQueue[i], activeQueue[j]] = [activeQueue[j], activeQueue[i]];
        }
        currentIndex = 0;
        showWord();
    }
</script>

</body>
</html>
